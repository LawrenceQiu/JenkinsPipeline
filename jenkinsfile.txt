pipeline {
  agent any

  stages {
    stage('Build') {
      steps {
        echo "Building the code using Maven"
      }
    }

    stage('Unit and Integration Tests') {
      steps {
        echo "Running unit and integration tests using JUnit and TestNG"
      }
      post {
        success {
            mail to: "lawrence.elque@gmail.com'",
            subject: "Unit and Integration Tests Passed"
            body: "Unit and Integration Tests have passed successfully. Please see attached logs."
        }
      }
    }
    

    stage('Code Analysis') {
      steps {
        echo "Integrating a code analysis tool - SonarQube"
      }
    }

    stage('Security Scan') {
      steps {
        echo "Performing security scan using OWASP ZAP"
      }
      post {
        success {
            mail to: "lawrence.elque@gmail.com'",
            subject: 'Security Scan Passed',
            body: 'Security Scan has passed successfully. Please see attached logs.',
            }
        }
    }

    stage('Deploy to Staging') {
      steps {
        echo "Deploying the application to a staging server"
      }
    }

    stage('Integration Tests on Staging') {
      steps {
        echo "Running integration tests on the staging environment using Selenium and Cucumber"
      }
    }

    stage('Deploy to Production') {
      steps {
        echo "Deploying the application to a production server"
      }
    }
  }
}
